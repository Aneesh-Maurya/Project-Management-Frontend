<div class="dashboard-container p-3 p-md-4">

  <!-- Header -->
  <div class="dashboard-header mb-4 p-3 rounded-3 text-white dashboard-header text-center text-md-start">
    <h2 class="fw-bold mb-1">ðŸ“Š Project Dashboard</h2>
    <p class="mb-0">Overview of your projects</p>
  </div>

  <!-- Summary Cards -->
  <div class="row mb-4 g-3">
    <div class="col-12 col-md-4">
      <div class="card text-white shadow-sm project-card h-100">
        <div class="card-body text-center">
          <h5>Total Projects</h5>
          <h2 class="fw-bold">{{ totalProjects }}</h2>
        </div>
      </div>
    </div>
    <div class="col-12 col-md-4">
      <div class="card text-white shadow-sm project-card h-100">
        <div class="card-body text-center">
          <h5>Active Projects</h5>
          <h2 class="fw-bold">{{ activeProjects }}</h2>
        </div>
      </div>
    </div>
    <div class="col-12 col-md-4">
      <div class="card text-white shadow-sm project-card h-100">
        <div class="card-body text-center">
          <h5>Completed Projects</h5>
          <h2 class="fw-bold">{{ completedProjects }}</h2>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Project Button -->
  <div class="mb-3 text-center text-md-end">
    <button class="btn w-30 w-md-auto"
            style="background-color: #0f2027; color: #fff;"
            (click)="openAddProject()">+ Add Project</button>
  </div>

  <!-- Projects Table -->
  <div class="card shadow-sm">
    <div class="card-body p-0 table-responsive">
      <table class="table table-hover mb-0">
        <thead class="table-header-navy text-white">
          <tr >
            <th>Title</th>
            <th>Description</th>
            <th>Status</th>
            <th>Created At</th>
            <th class="text-center">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let project of projects; let i = index"
              (click)="viewProjectDetails(project._id)"
              style="cursor:pointer">
            <td>{{ project.title }}</td>
            <td class="text-truncate" style="max-width: 200px;">{{ project.description }}</td>
            <td>
              <span class="badge"
                    [ngClass]="{
                      'bg-success': project.status === 'active',
                      'bg-secondary': project.status === 'completed'
                    }">{{ project.status | titlecase }}</span>
            </td>
            <td>{{ project.createdAt | date:'shortDate' }}</td>
            <td class="text-center">
              <div class="d-flex justify-content-center flex-wrap gap-1">
                <button class="btn btn-sm btn-outline-primary"
                        (click)="openEditProject(i); $event.stopPropagation()">Edit</button>
                <button class="btn btn-sm btn-outline-danger"
                        (click)="deleteProject(i); $event.stopPropagation()">Delete</button>
              </div>
            </td>
          </tr>
          <tr *ngIf="projects.length === 0">
            <td colspan="5" class="text-center">No projects found!</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

</div>

<!-- Project Modal -->
<div class="modal fade" id="projectModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header text-white" style="background-color: #0b2d52;">
        <h5 class="modal-title">{{ editingProjectIndex !== null ? 'Edit Project' : 'Add Project' }}</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="projectForm">
          <div class="mb-3">
            <label class="form-label">Title</label>
            <input type="text" class="form-control" formControlName="title">
            <div class="text-danger"
                 *ngIf="projectForm.get('title')?.touched && projectForm.get('title')?.hasError('required')">
              Title is required
            </div>
          </div>
          <div class="mb-3">
            <label class="form-label">Description</label>
            <textarea class="form-control" formControlName="description"></textarea>
          </div>
          <div class="mb-3">
            <label class="form-label">Status</label>
            <select class="form-select" formControlName="status">
              <option value="active">Active</option>
              <option value="completed">Completed</option>
            </select>
          </div>
        </form>
      </div>
      <div class="modal-footer d-grid gap-2 d-sm-flex justify-content-sm-end">
        <button type="button" class="btn btn-secondary " data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary " (click)="saveProject()">Save</button>
      </div>
     
    </div>
  </div>
</div>
